# TECHIN515 Lab 3: ESP32 Sorting Hat

## Overview
In this lab, you will build a magical sorting hat using an ESP32 and machine learning. The sorting hat will classify students into different houses based on their characteristics. 

## Learning Objectives
- Get familiar with buttons
- Develop skills in data collection and preprocessing
- Implement a classification system using decision tree
- Create an interactive and engaging user experience

## Hardware Requirements
- ESP32 development board
- 4 push buttons
- OLED display (Adafruit SSD1306)
- USB cable
- Breadboard and jumper wires

## Software Requirements
- Arduino IDE or PlatformIO
- ESP32 board support package
- Required libraries:
  - EloquentTinyML
  - Adafruit SSD1306


## Tasks
1. Create your dataset to train the sorting hat.
   - Create at least five responses to all questions and label them.
   - Talk to other students, and collect responses generated by at least five other students. This should give you at least 30 entries in the dataset.
2. Use `sorting_hat_laptop.py` to train your decision tree and convert it to C++ for ESP32.
3. Wire your ESP32 with buttons and OLED display. An example is shown in the figure below. Update the sketch `sorting_hat_esp_button.ino` accordingly, depending on how you wire the sorting hat. Complete the `checkButtons()` logic. The starter code includes a function stub for checking button presses and recording responses. Your task is to implement the following:
   - Wait for **exactly one** of the 4 buttons to be pressed  
   - Store the response as an integer (1â€“4) in the `responses[]` array  
   - Debounce the input using a small delay  
   - Call the `nextQuestion()` function once an answer is recorded
The pseudocode is as follows:
```cpp
// Pseudocode:
if (digitalRead(BUTTON_A) == LOW) {
   // Record response as 1
   // Move to next question
}
```
Hint: Use the INPUT_PULLUP mode and look for LOW when pressed.


![Example of a sorting hat created using ESP32](assets/sorting_hat_button.png)

4. Play with your sorting hat. Are all 10 questions important to create the sorting hat? If you were to remove some questions to improve user experience, which questions would you remove and justify your answer.

## Deliverables
1. Picture or video of your working sorting hat prototype
2. Source code with comments
3. Brief documentation of your implementation
